<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

{% load static %}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<title>fypDesign</title>
<link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap">
<link rel="stylesheet" href="{% static 'assets/fonts/fontawesome-all.min.css' %}">
<link rel="stylesheet" href="{% static 'assets/fonts/font-awesome.min.css' %}">
{% comment %} <link rel="stylesheet" href="{% static 'assets/fonts/fontawesome5-overrides.min.css' %}"> {% endcomment %}
<link rel="stylesheet" href="{% static 'assets/css/bs-theme-overrides.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/animated-services.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Articles-Cards-images.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Clients-Slider.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Drag--Drop-Upload-Form.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Login-Box-En-login-box-en.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Login-Page-B5.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Login-with-overlay-image.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Navbar-Right-Links-icons.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/Pretty-Registration-Form-.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<!-- ... -->
    <style>
      .navbar {
          z-index: 1000; /* any number larger than the z-index of .dashed_upload */
          position: relative; /* required for z-index to take effect */
      }
      
      .dashed_upload {
          z-index: 1; /* any number smaller than the z-index of .navbar */
          position: relative; /* required for z-index to take effect */
        }

        .prev-button-container {
          position: absolute;
          top:10px; /* Adjust this value to move the button down */
          left: 20px; /* Adjust this value to position the button horizontally */
          width: 30px; /* Adjust width as needed */
          height: 30px; /* Adjust height as needed */
          /* Change cursor to pointer on hover */
      }
  
      /* Hide default arrow */
     
      </style>
</head>

<body>
    <nav class="navbar navbar-expand-md bg-body py-3">
        <div class="container"><a class="navbar-brand d-flex align-items-center" href="#"><span class="bs-icon-sm bs-icon-rounded bs-icon-primary d-flex justify-content-center align-items-center me-2 bs-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-bezier">
                       
                    </svg></span><span>Intelligent Reader</span></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-2"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="btn-group" role="group"></div>
            <div class="collapse navbar-collapse" id="navcol-2">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Second Item</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">About Us</a></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
                <div class="btn-group" role="group"></div><a class="btn btn-primary ms-md-2" role="button" href="#"><i class="far fa-user"></i></a>
            </div>
        </div>
    </nav>
    <div class="container-sm max-4">
      <div class="swiper">
          <div class="swiper-wrapper"> <!-- Corrected typo from swiper-wraper to swiper-wrapper -->
              <div class="swiper-slide">
                  <div class="row gx-2">
                      <div class="col p-3  bg-light border-5 border-gray">
                          <div class="dashed_upload">
                              <form method="post" action="{% url 'home' %}" enctype="multipart/form-data">
                                  {% csrf_token %}
                                  <div class="drop">
                                      <div class="cont">
                                          <i class="fa fa-cloud-upload"></i>
                                          <div class="tit">
                                              Drag & Drop
                                          </div>
                                          <div class="desc">
                                              or
                                          </div>
                                          <div class="browse">
                                              click here to browse
                                          </div>
                                      </div>
                                      <output id="list"></output>
                                      <input id="files" name="document" type="file" onchange="previewFile()" />
                                  </div>
                              </form>
                          </div>
                      </div>
                      <div class="col-md-auto p-3 mx-4 bg-light border-5 border-gray">
                        <h4>Select the document language</h4>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle px-2 py-2" type="button" id="languageButton"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Select Language
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="languageButton">
                                  <li><a class="dropdown-item active" href="#" onclick="setLanguage('English')">English</a></li>
                                  <li><a class="dropdown-item" href="#" onclick="setLanguage('Hindi')">Hindi</a></li>
                                  <li><a class="dropdown-item" href="#" onclick="setLanguage('Nepali')">Nepali</a></li>
                                  <li><hr class="dropdown-divider"></li>
                                  <li><a class="dropdown-item" href="#">need help?</a></li>
                              </ul>
                          </div>
                          <h4>Choose the output format
                          <div class="dropdown">
                              <button class="btn btn-secondary dropdown-toggle px-3 py-2" type="button" id="outputFormatButton"
                                  data-bs-toggle="dropdown" aria-expanded="false">
                                  Output Format
                              </button>
                              <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="outputFormatButton">
                                  <li><a class="dropdown-item active" href="#" onclick="setOutputFormat('.txt')">.txt</a></li>
                                  <li><a class="dropdown-item" href="#" onclick="setOutputFormat('.pdf')">.pdf</a></li>
                                  <li><a class="dropdown-item" href="#" onclick="setOutputFormat('.docs')">.docs</a></li>
                                  <li><hr class="dropdown-divider"></li>
                                  <li><a class="dropdown-item" href="#">need help?</a></li>
                              </ul>
                          </div>
                          <button id="nextButton" class="btn btn-outline-info py-2 px-5 btn-lg btn-block">Next</button>
                      </div>
                  </div>
              </div>
              <div class="swiper-slide">
                <div class="prev-button-container">
                  <div class="swiper-button-prev">
                  </div>
              </div>
                  <div class="row gx-2">
                              <div class="col p-3  bg-light border-5 border-gray">
                               
                                <br><br>
                                  <p class="m-2">Image Pre-Processing</p>
                                  <label for="threshold" class="form-label">Threshold</label>
                                  <input type="range" class="form-range" id="threshold">
                                  <div class="p-1 mb-2 bg-secondary text-white">Threshold Value</div>
  
                                  <label for="binarization" class="form-label">Binarization</label>
                                  <input type="range" class="form-range" id="binarization">
                                  <div class="p-1 mb-2 bg-secondary text-white">Binary value</div>
  
                                  <label for="dilation" class="form-label">Dilation</label>
                                  <input type="range" class="form-range" id="dilation">
                                  <div class="p-1 mb-2 bg-secondary text-white">Dilation value</div>
  
                                  <button type="button" class="btn btn-outline-danger" style="margin-right: 50px; margin-left: 50px; margin-top:20px; padding:10px;">Set Default Value</button>
                                  <button type="button" class="btn btn-outline-success" style="padding:10px; margin-top:20px; ">Detect Characters</button>
                              </div>
  
                              <div class="col p-3  bg-light border-5 border-gray" id="preview">
  
                              </div>
                          </div>
              </div>
          </div>
          {% comment %} <div class="swiper-pagination"></div> {% endcomment %}
      </div>
  </div>  

<div id="preview"></div>
<br><br><br><br><br>
<!-- home.html -->
{% if prediction_text %}
    <p>Predicted Text: {{ prediction_text }}</p>
{% endif %}
<script src = "{% static 'assets/js/app/dragdrop.js' %}"></script>
<script src = "{% static 'assets/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
{% comment %} <script src = "{% static 'assets/js/main2.js' %}"></script> {% endcomment %}
<script>
  var swiper = new Swiper('.swiper', {
      // Optional parameters
      direction: 'horizontal',
      loop: true,

      // Navigation arrows
      navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
      },

      // Pagination
      pagination: {
          el: '.swiper-pagination',
          clickable: true,
      },
  });
  //Add event listener to the "Next" button to move to the next slide
    document.getElementById('nextButton').addEventListener('click', function() {
        swiper.slideNext();
    });
</script>
<script>
    function previewFile() {
      const preview = document.querySelector('#preview');
      const file = document.querySelector('input[type=file]').files[0];
      const reader = new FileReader();
      var result;
      reader.addEventListener("load", function () {
        let img = new Image();
        img.src = reader.result;
        result = img.src;
        img.onload = function() {
          let canvas = document.createElement('canvas');
          let ctx = canvas.getContext('2d');
  
          // Get the dimensions of the container
          let rect = preview.getBoundingClientRect();
          let MAX_WIDTH = rect.width;
          let MAX_HEIGHT = rect.height;
  
          let width = img.width;
          let height = img.height;
  
          // Calculate the scaling factor to keep aspect ratio
          let scaleFactor = Math.min(MAX_WIDTH / width, MAX_HEIGHT / height);
  
          // Check if the image is larger than the maximum dimensions
          if (scaleFactor < 1) {
            width *= scaleFactor;
            height *= scaleFactor;
          }
  
          canvas.width = width;
          canvas.height = height;
          ctx.drawImage(img, 0, 0, width, height);
  
          let dataurl = canvas.toDataURL(file.type);
            preview.innerHTML = '<p class=mt-2">Uploaded image from User</p><div><img src="' + dataurl + '"></div>';
        }
      }, false);
  
      if (file) {
        reader.readAsDataURL(file);
      }
    }
  </script>
  <script>
    let language = '';
    let outputFormat = '';

    function setLanguage(lang) {
        language = lang;
        console.log(language);
        document.getElementById('languageButton').textContent = language;
    }

    function setOutputFormat(format) {
        outputFormat = format;
        console.log(outputFormat);
        document.getElementById('outputFormatButton').textContent = outputFormat;
    }
  </script>
</body>

</html>